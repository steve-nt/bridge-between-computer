================================================================================
SSH STRESS TESTING GUIDE - TASK 5 ALTERNATIVE
================================================================================

OBJECTIVE:
Connect to your EC2 instances via SSH and run stress-ng to simulate CPU failure
for Task 5 (failure simulation).

YOUR INSTANCES:
  1. i-03b3951e1cff6aa9b
  2. i-0a6b2c4bdce290dd0
  3. i-0d91bf046fcb0be90

REGION: eu-north-1
AMI: Amazon Linux 2 or Ubuntu (pre-configured with web app)

ADVANTAGE OF SSH:
  âœ“ Doesn't require SSM
  âœ“ Doesn't require IAM role configuration
  âœ“ Direct access to instance
  âœ“ Full control over stress command
  âœ“ Simpler than FIS/SSM
  âœ“ Immediate results

TOTAL TIME: ~5 minutes (SSH setup + stress test)

================================================================================
PART 1: PREPARE SSH - GET KEY PAIR AND INSTANCE IPs
================================================================================

Step 1.1: Find Your SSH Key Pair
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Your key file should be named:
    â†’ D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem
  
  Location (likely):
    â†’ C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E\
    â†’ (Same directory as this file)
  
  If you can't find it:
    1. AWS Console â†’ EC2 â†’ Key Pairs
    2. Look for: D7078E-MINI-PROJECT-GROUP35-WEBSRV (or similar)
    3. Download the .pem file if missing
    4. Save to: C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E\

Step 1.2: Get Instance Public IP Addresses
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. AWS Console â†’ EC2 â†’ Instances
  
  2. For each of your 3 instances, note:
     â”œâ”€ Instance ID
     â”œâ”€ Public IPv4 address (this is what you'll SSH to)
     â””â”€ Private IPv4 address (backup option)
  
  Example:
    Instance 1: i-03b3951e1cff6aa9b
      â”œâ”€ Public IP: 13.50.XXX.XXX
      â””â”€ Private IP: 172.31.X.X
    
    Instance 2: i-0a6b2c4bdce290dd0
      â”œâ”€ Public IP: 13.51.XXX.XXX
      â””â”€ Private IP: 172.31.X.X
    
    Instance 3: i-0d91bf046fcb0be90
      â”œâ”€ Public IP: 13.52.XXX.XXX
      â””â”€ Private IP: 172.31.X.X

Step 1.3: Verify Security Group Allows SSH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. Click on one instance
  
  2. Go to "Security" tab
  
  3. Look at "Security groups" section
  
  4. Click on the security group link
  
  5. Check "Inbound rules":
     â”œâ”€ Type: SSH
     â”œâ”€ Port: 22
     â”œâ”€ Source: 0.0.0.0/0 (or your IP)
     â””â”€ Status: âœ“ Should exist
  
  If SSH rule doesn't exist:
    1. Security group â†’ Edit inbound rules
    2. Add rule:
       â”œâ”€ Type: SSH
       â”œâ”€ Port: 22
       â”œâ”€ Source: 0.0.0.0/0 (or your IP)
    3. Save
  
  (This allows your machine to SSH to the instance)

================================================================================
PART 2: SSH INTO INSTANCE (WINDOWS PowerShell)
================================================================================

Step 2.1: Open PowerShell
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. Press Windows key + R
  
  2. Type: powershell
  
  3. Press Enter
  
  You should see a PowerShell prompt:
    PS C:\Users\snten>

Step 2.2: Navigate to Key Pair Directory
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type this command:
  
    cd "C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E"
  
  Press Enter
  
  Verify you're in the right directory:
    PS C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E>

Step 2.3: List Your Files (Verify Key Exists)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type: ls
  
  You should see:
    â†’ D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem (the key file)
  
  If you don't see it:
    1. Download from AWS Console â†’ EC2 â†’ Key Pairs
    2. Save to this directory
    3. Retry ls command

Step 2.4: Fix Key Permissions (CRITICAL!)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  âš  Windows doesn't handle .pem permissions well. Fix this:

  Type this command:
  
    icacls "D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem" /reset
    icacls "D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem" /grant:r "$($env:USERNAME):(F)" /inheritance:r
  
  This:
    âœ“ Removes inherited permissions
    âœ“ Gives only you read access
    âœ“ Makes the key usable for SSH

Step 2.5: SSH to Your Instance
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Replace <PUBLIC_IP> with actual IP address!

  Type:
  
    ssh -i "D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem" ec2-user@<PUBLIC_IP>
  
  Example (with real IP):
  
    ssh -i "D7078E-MINI-PROJECT-GROUP35-WEBSRV.pem" ec2-user@13.50.123.45

  Press Enter

Step 2.6: Accept Host Key
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  You'll see:
    "The authenticity of host... can't be established. Are you sure you want to continue?"
  
  Type: yes
  
  Press Enter

Step 2.7: Verify SSH Connection
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  You should now see a prompt like:
    [ec2-user@ip-172-31-X-X ~]$
  
  This means:
    âœ“ SSH connection successful!
    âœ“ You're logged into the instance!

================================================================================
PART 3: PREPARE INSTANCE FOR STRESS TEST
================================================================================

Step 3.1: Update Package Manager
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type:
  
    sudo apt-get update -y
  
  Or if Amazon Linux 2:
  
    sudo yum update -y
  
  Press Enter
  
  Wait for it to complete (takes ~30 seconds)

Step 3.2: Install stress-ng Tool
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type:
  
    sudo apt-get install -y stress-ng
  
  Or if Amazon Linux 2:
  
    sudo yum install -y stress-ng
  
  Press Enter
  
  Wait for installation (takes ~1-2 minutes)

Step 3.3: Verify Installation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type:
  
    stress-ng --version
  
  You should see version info, like:
    stress-ng: info: [1234] stress-ng 0.XX.XX
  
  This confirms stress-ng is installed âœ“

================================================================================
PART 4: START MONITORING IN AWS CONSOLE
================================================================================

Before you run the stress test, set up monitoring:

â˜ 4.1 Open CloudWatch Dashboard in browser
    URL: https://eu-north-1.console.aws.amazon.com/cloudwatch/
    
    Dashboard: D7078E-Mini-Project-Dashboard
    
    Set auto-refresh: 10 seconds

â˜ 4.2 Open Target Group in another browser tab
    URL: https://eu-north-1.console.aws.amazon.com/ec2/
    
    EC2 â†’ Target Groups â†’ D7078E-MINI-PROJECT-GROUP35-TG
    
    Watch for health status changes

â˜ 4.3 Open ASG Activity in another browser tab
    URL: https://eu-north-1.console.aws.amazon.com/ec2/
    
    EC2 â†’ Auto Scaling Groups â†’ D7078E-MINI-PROJECT-GROUP35-ASG
    
    Activity tab - watch for new instance launches

Now you have:
  âœ“ SSH session open in PowerShell
  âœ“ CloudWatch dashboard open (ready to monitor)
  âœ“ Target Group page open (ready to monitor)
  âœ“ ASG Activity page open (ready to monitor)
  âœ“ Ready to run stress test!

================================================================================
PART 5: RUN STRESS-NG COMMAND (120 SECONDS)
================================================================================

â° TIMING: You have 2-3 minutes to observe failure and recovery

Step 5.1: Take a Screenshot of Normal State
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  BEFORE running stress:
  
  â˜ Take screenshot of CloudWatch dashboard
    â”œâ”€ CPU should be normal (~5-10%)
    â”œâ”€ HealthyHostCount should be 3
    â”œâ”€ RequestCount should be normal
    â””â”€ All metrics stable
  
  Label it: "BEFORE_FAILURE.png"

Step 5.2: Run Stress-ng on Instance
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Back in your SSH session, type:
  
    stress-ng -c 0 -l 90 -t 120s
  
  Explanation:
    -c 0   â†’ Use all CPU cores
    -l 90  â†’ Stress to 90% load average
    -t 120s â†’ Run for 120 seconds (2 minutes)
  
  Press Enter

Step 5.3: Stress Command Output
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  You'll see output like:
  
    stress-ng: info: [PID] stress-ng version 0.XX.XX
    stress-ng: info: [PID] dispatching hogs: [CPU cores] cpu
    stress-ng: info: [PID] successful run completed in 120.00s
  
  The command runs for 120 seconds, then stops automatically.
  
  âš  DO NOT INTERRUPT (Ctrl+C) - let it run the full 2 minutes!

Step 5.4: Monitor During Stress (CRITICAL!)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  While stress-ng runs (next 2 minutes), watch your browser tabs:
  
  CloudWatch Dashboard:
    âœ“ Watch CPU on this instance spike to 90%+
    âœ“ Watch overall CPU change
    âœ“ Watch HealthyHostCount (may drop if health check fails)
    âœ“ Watch RequestCount (may drop during stress)
  
  Target Group:
    âœ“ Watch health status of instances
    âœ“ This instance may show "Unhealthy" if CPU too high
    âœ“ ALB will stop sending traffic to it
  
  ASG Activity:
    âœ“ Watch for "Launching 1 instance" message
    âœ“ ASG detects unhealthy instance and replaces it
    âœ“ New instance starts booting
  
  Take Screenshots During Stress:
    â˜ CPU spiking to 90% (DURING_STRESS.png)
    â˜ Health check failing (HEALTH_CHECK_FAILING.png)
    â˜ ASG replacing instance (REPLACEMENT_LAUNCHING.png)

Step 5.5: Stress Ends (After 120 Seconds)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  After 120 seconds, you'll see:
  
    [PID] successful run completed in 120.00s
  
  And the SSH prompt returns:
  
    [ec2-user@ip-172-31-X-X ~]$
  
  At this point:
    âœ“ Stress command finished
    âœ“ CPU dropping back to normal
    âœ“ System begins recovery
    âœ“ ASG replacement instance becoming healthy

Step 5.6: Observe Recovery (Next 2-3 Minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Keep watching CloudWatch:
  
  Minute 2:
    â”œâ”€ Stressed instance recovering
    â”œâ”€ Replacement instance still booting
    â”œâ”€ HealthyHostCount still low (2)
    â””â”€ RequestCount still reduced
  
  Minute 2-3:
    â”œâ”€ Replacement instance passes health checks
    â”œâ”€ HealthyHostCount rises back to 3
    â”œâ”€ RequestCount normalizes
    â”œâ”€ Old stressed instance may terminate
    â””â”€ System fully RECOVERED!
  
  Take Screenshots During Recovery:
    â˜ HealthyHostCount rising back (RECOVERY_PROGRESS.png)
    â˜ All metrics normalizing (AFTER_RECOVERY.png)
    â˜ Final state: 3 healthy, all normal (FINAL_STATE.png)

================================================================================
PART 6: DISCONNECT SSH AND COLLECT EVIDENCE
================================================================================

Step 6.1: Exit SSH Session
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Type: exit
  
  Press Enter
  
  You should return to your local PowerShell prompt:
    PS C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E>

Step 6.2: Collect Screenshots
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  You should have taken:
  
  â˜ BEFORE_FAILURE.png
    â””â”€ Normal state: 3 healthy, normal CPU
  
  â˜ DURING_STRESS.png
    â””â”€ CPU spiked to 90%
  
  â˜ HEALTH_CHECK_FAILING.png
    â””â”€ Instance marked unhealthy
  
  â˜ REPLACEMENT_LAUNCHING.png
    â””â”€ ASG launching new instance
  
  â˜ RECOVERY_PROGRESS.png
    â””â”€ New instance becoming healthy
  
  â˜ AFTER_RECOVERY.png
    â””â”€ All metrics back to normal
  
  â˜ FINAL_STATE.png
    â””â”€ 3 healthy instances, all normal

Step 6.3: Document Timeline
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Record exact times:
  
    Start time (stress started): ____:____ (HH:MM)
    Health check failed: ____:____ (HH:MM)
    Instance marked unhealthy: ____:____ (HH:MM)
    Replacement launched: ____:____ (HH:MM)
    Stress ended (120s): ____:____ (HH:MM)
    Replacement became healthy: ____:____ (HH:MM)
    System fully recovered: ____:____ (HH:MM)
    
    Total recovery time: ____ minutes

Step 6.4: Save Evidence
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Create a folder:
    C:\Users\snten\Desktop\bridge-between-computer\Mini D7078E\Task5_Evidence\
  
  Save all screenshots there:
    â”œâ”€ BEFORE_FAILURE.png
    â”œâ”€ DURING_STRESS.png
    â”œâ”€ HEALTH_CHECK_FAILING.png
    â”œâ”€ REPLACEMENT_LAUNCHING.png
    â”œâ”€ RECOVERY_PROGRESS.png
    â”œâ”€ AFTER_RECOVERY.png
    â”œâ”€ FINAL_STATE.png
    â””â”€ Timeline.txt (with timestamps)

================================================================================
EXPECTED TIMELINE
================================================================================

Minute 0:00
  â”œâ”€ You run: stress-ng -c 0 -l 90 -t 120s
  â”œâ”€ Instance CPU: 0% â†’ 90%
  â”œâ”€ CloudWatch shows spike immediately
  â””â”€ Stressed instance receiving full load

Minute 0:30
  â”œâ”€ ALB health check runs (every 30 seconds)
  â”œâ”€ Instance doesn't respond quickly (too busy)
  â”œâ”€ Health check FAILS
  â”œâ”€ Target status: Healthy â†’ Unhealthy
  â”œâ”€ ALB stops sending traffic to this instance
  â””â”€ HealthyHostCount: 3 â†’ 2

Minute 1:00
  â”œâ”€ ASG detects unhealthy instance
  â”œâ”€ ASG launches REPLACEMENT instance
  â”œâ”€ ASG Activity: "Launching 1 instance"
  â”œâ”€ Old instance still running (not receiving traffic)
  â”œâ”€ Only 2 healthy instances getting traffic
  â””â”€ RequestCount: reduced (2 instances instead of 3)

Minute 1:30
  â”œâ”€ Replacement instance boots (Pending â†’ Running)
  â”œâ”€ Status checks: Initializing â†’ Passed
  â”œâ”€ Health check: not yet passed
  â”œâ”€ Still only 2 instances getting traffic
  â””â”€ RequestCount: still reduced

Minute 2:00
  â”œâ”€ Stress-ng STOPS (120 seconds complete)
  â”œâ”€ Stressed instance CPU: 90% â†’ 5% (drops rapidly)
  â”œâ”€ Replacement instance: still passing health checks
  â”œâ”€ System recovery starting
  â””â”€ SSH command prompt returns to you

Minute 2:30
  â”œâ”€ Replacement instance health check: PASSES
  â”œâ”€ Target status: Unhealthy â†’ Healthy
  â”œâ”€ HealthyHostCount: 2 â†’ 3 (recovery complete!)
  â”œâ”€ ALB sends traffic to replacement instance
  â”œâ”€ RequestCount: rising back to normal
  â””â”€ Old stressed instance: may terminate

Minute 3:00+
  â”œâ”€ HealthyHostCount: 3 (all healthy)
  â”œâ”€ CPU: normalized
  â”œâ”€ RequestCount: back to normal
  â”œâ”€ All metrics: stable
  â””â”€ SYSTEM FULLY RECOVERED! âœ“

TOTAL RECOVERY TIME: ~2-3 minutes

================================================================================
WHAT YOU'VE DEMONSTRATED
================================================================================

By completing this SSH stress test, you've shown:

âœ“ Health checks work correctly
  â””â”€ Detected failure within 30 seconds
  â””â”€ Removed unhealthy instance from traffic

âœ“ ALB load balancing works
  â””â”€ Automatically removed failed instance
  â””â”€ Redirected traffic to healthy instances
  â””â”€ Kept system partially available (2/3 healthy)

âœ“ ASG auto-replacement works
  â””â”€ Detected unhealthy instance immediately
  â””â”€ Launched replacement instance
  â””â”€ No manual intervention needed

âœ“ System is resilient
  â””â”€ Survived single instance failure
  â””â”€ Maintained service availability
  â””â”€ Recovered automatically

This is HIGH AVAILABILITY in action! ðŸŽ¯

================================================================================
TROUBLESHOOTING
================================================================================

Problem: Can't find public IP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Solution:
    1. Make sure instance is in "Running" state
    2. AWS Console â†’ EC2 â†’ Instances
    3. Click instance
    4. In Details tab, look for "Public IPv4 address"
    5. If empty, instance may not have internet access
       - Check security group allows outbound traffic
       - Instance may need elastic IP

Problem: SSH connection denied
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Solution:
    1. Verify key file exists in current directory
    2. Verify key permissions are correct (Step 2.4)
    3. Verify security group allows SSH port 22
    4. Try using private IP instead of public IP
    5. Try different instance (verify one works first)

Problem: stress-ng command not found
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Solution:
    1. Try installation again: sudo apt-get install -y stress-ng
    2. If apt doesn't work, try yum (Amazon Linux 2)
    3. Alternative: Use built-in 'yes' command: yes > /dev/null

Problem: Can't see CPU spike in CloudWatch
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Solution:
    1. Make sure CloudWatch dashboard is set to refresh every 10 seconds
    2. Make sure you're watching the right instance
    3. CPU metrics may take 30-60 seconds to update
    4. Try increasing refresh rate manually (refresh button)

Problem: Health check doesn't fail
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Solution:
    1. CPU stress might not be high enough
    2. Try: stress-ng -c 0 -l 95 -t 120s (95% instead of 90%)
    3. Or extend duration: -t 180s (3 minutes instead of 2)
    4. Check ALB health check timeout (EC2 â†’ Target Groups)

================================================================================
ALTERNATIVE: MULTIPLE INSTANCES
================================================================================

You have 3 instances. Want to stress multiple at once?

Option 1: Stress them sequentially
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. SSH to instance 1 â†’ run stress-ng â†’ observe
  2. After recovery, SSH to instance 2 â†’ run stress-ng â†’ observe
  3. Then SSH to instance 3 â†’ run stress-ng â†’ observe
  
  Total time: ~15-20 minutes for all 3

Option 2: Stress them in parallel (advanced)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. Open 3 PowerShell windows
  2. SSH to instance 1 in window 1
  3. SSH to instance 2 in window 2
  4. SSH to instance 3 in window 3
  5. In each window, run: stress-ng -c 0 -l 90 -t 120s
  6. All 3 run simultaneously
  7. Watch ASG replace all 3 instances at once
  
  Total time: ~5 minutes (but all 3 instances fail)
  
  âš  Only do this if you want to test full failure scenario
     (not recommended for this task - test one at a time)

For Task 5: Test ONE instance at a time. Easier to observe and document.

================================================================================
NEXT STEPS
================================================================================

After completing SSH stress test:

1. âœ“ Stress test completed
2. âœ“ Failure observed in CloudWatch
3. âœ“ Recovery observed and documented
4. âœ“ Screenshots collected

Now for Task 5 deliverables:

  â–¡ 5-6 screenshots showing timeline
  â–¡ CloudWatch metrics (full timeline)
  â–¡ ASG Activity log (showing instance replacement)
  â–¡ Timeline with exact timestamps
  â–¡ Analysis: What happened, how long, observations
  â–¡ Lessons learned: What this demonstrates

For Task 6 (final task):

  â–¡ Stop load generators (if still running)
  â–¡ Terminate all instances
  â–¡ Delete ASG, ALB, Target Group, Launch Template
  â–¡ Delete AMI
  â–¡ Verify cleanup complete
  â–¡ Collect all logs and metrics
  â–¡ Create final lab report

You're almost at the finish line! ðŸš€

================================================================================
REFERENCE COMMANDS
================================================================================

SSH Connection:
  ssh -i "KEY_FILE.pem" ec2-user@<PUBLIC_IP>

Stress-ng variations:
  stress-ng -c 0 -l 90 -t 120s      (90% load for 2 min - standard)
  stress-ng -c 0 -l 95 -t 120s      (95% load - stronger stress)
  stress-ng -c 0 -l 90 -t 180s      (90% load for 3 min - longer)
  stress-ng -c 0 -l 100 -t 60s      (100% load for 1 min - extreme)

Check system:
  uptime                             (see system load)
  top -b -n 1                        (see CPU usage)
  iostat -x 1 5                      (see I/O stats)

System info:
  uname -a                           (OS info)
  nproc                              (number of CPUs)
  free -h                            (memory)

================================================================================
GOOD LUCK! ðŸŽ¯
================================================================================

This SSH method is simpler, doesn't require SSM or FIS, and gives you
direct control over the stress test. You'll clearly see the failure
and recovery in CloudWatch.

Complete Task 5, collect evidence, and you're done! ðŸš€

================================================================================
