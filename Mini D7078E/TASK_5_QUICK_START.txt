================================================================================
TASK 5 QUICK START - FAILURE SIMULATION
================================================================================

OBJECTIVE: Simulate failure on one instance and observe auto-recovery

STATUS: Ready! (ASG almost at 3 instances)

================================================================================
WHAT TO DO NOW
================================================================================

1. WAIT for 3 instances
   â””â”€ Keep load scripts running
   â””â”€ Should reach 3 within 1-2 minutes
   â””â”€ Watch HealthyHostCount: 1 â†’ 2 â†’ 3

2. ONCE at 3 instances, STOP load scripts
   â””â”€ Both PowerShell windows: Ctrl+C
   â””â”€ Load can continue or stop (your choice)

3. PICK an instance to stress
   â””â”€ AWS Console > EC2 > Instances
   â””â”€ Find one instance from your ASG
   â””â”€ Copy its Instance ID (starts with i-)

4. RUN stress command
   â””â”€ Open new PowerShell
   â””â”€ Paste command below (replace Instance ID)
   â””â”€ Press Enter

5. WATCH dashboard
   â””â”€ Keep CloudWatch open
   â””â”€ Take screenshots during failure
   â””â”€ Observe recovery

6. COLLECT evidence
   â””â”€ Screenshots
   â””â”€ Logs
   â””â”€ Timeline

================================================================================
THE COMMAND
================================================================================

Copy, replace <INSTANCE_ID>, and paste:

aws ssm send-command \
  --instance-ids i-0abc1234def567890 \
  --document-name "AWS-RunShellScript" \
  --parameters "commands=['sudo apt-get update -y','sudo apt-get install -y stress-ng','stress-ng -c 0 -l 90 -t 120s']" \
  --region eu-north-1

Example with real ID:
aws ssm send-command \
  --instance-ids i-0a1b2c3d4e5f6g7h8 \
  --document-name "AWS-RunShellScript" \
  --parameters "commands=['sudo apt-get update -y','sudo apt-get install -y stress-ng','stress-ng -c 0 -l 90 -t 120s']" \
  --region eu-north-1

================================================================================
EXPECTED BEHAVIOR (2-3 minutes)
================================================================================

Minute 0: Stress starts
  â”œâ”€ Target instance CPU: 0% â†’ 90%
  â””â”€ Other instances: normal

Minute 0-1: Health check fails
  â”œâ”€ HealthyHostCount: 3 â†’ 2
  â”œâ”€ ALB: stops sending traffic to failed instance
  â””â”€ RequestCount: drops temporarily

Minute 1-2: Replacement launches
  â”œâ”€ ASG: launches new instance
  â”œâ”€ HealthyHostCount: still 2
  â”œâ”€ New instance: booting
  â””â”€ RequestCount: rising again

Minute 2: Stress ends
  â”œâ”€ Old instance: CPU drops, but unhealthy
  â””â”€ Replacement: becoming healthy

Minute 2-3: Recovery complete
  â”œâ”€ HealthyHostCount: 2 â†’ 3
  â”œâ”€ Metrics: normalize
  â”œâ”€ Old instance: terminates
  â””â”€ System: RECOVERED! âœ“

================================================================================
SCREENSHOTS TO TAKE
================================================================================

â˜ Before: 3 healthy, normal metrics
â˜ During: Health check failing, CPU spiking
â˜ Replacement: New instance launching
â˜ Recovery: HealthyHostCount back to 3
â˜ Final: All metrics normalized

================================================================================
RESULT
================================================================================

You'll demonstrate:
  âœ“ Health checks detect failures
  âœ“ ALB removes failed instance
  âœ“ ASG replaces it automatically
  âœ“ No manual intervention needed
  âœ“ System recovers in ~2-3 minutes
  âœ“ High availability works!

This is what DevOps/Cloud Engineering is about! ğŸš€

================================================================================
DETAILED GUIDE
================================================================================

For more details, see: TASK_5_FAILURE_SIMULATION.txt

Includes:
- Multiple simulation options (FIS, SSM, SSH)
- Expected timeline
- Screenshots checklist
- Deliverables
- Analysis questions

================================================================================
NEXT STEPS
================================================================================

After Task 5:
  1. Stop load generators
  2. Collect all evidence (screenshots, logs)
  3. Task 6: Teardown (delete resources)
  4. Create lab report with findings

But first: DO TASK 5! ğŸ¯

================================================================================
