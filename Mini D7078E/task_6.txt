================================================================================
TASK 6: TEARDOWN, CLEANUP & FINAL DOCUMENTATION
================================================================================

OBJECTIVE:
Stop all load generators, collect final evidence, delete AWS resources,
and produce final lab report with analysis and lessons learned.

REGION: eu-north-1
STATUS: Ready for cleanup

================================================================================
IMPORTANT: DO NOT SKIP THIS STEP!
================================================================================

Leaving resources running will cost money! ($0.01-0.10+ per hour)

After completing Tasks 1-5, you MUST:
  âœ“ Delete Auto Scaling Group (terminates instances)
  âœ“ Delete Application Load Balancer
  âœ“ Delete Target Group
  âœ“ Delete Launch Template
  âœ“ (Optional) Deregister AMI
  âœ“ (Optional) Delete Security Groups

Estimated cost to save: $0.10-1.00 per day!

================================================================================
STEP 1: STOP ALL LOAD GENERATORS (IMMEDIATE!)
================================================================================

If you're still running load tests, STOP THEM NOW:

For PowerShell scripts:
  â”œâ”€ Window 1: Press Ctrl+C
  â”œâ”€ Window 2: Press Ctrl+C
  â””â”€ Window 3: Press Ctrl+C

For Docker Compose:
  â””â”€ Terminal: Press Ctrl+C
  â””â”€ Run: docker-compose down

For Python scripts:
  â””â”€ Terminal: Press Ctrl+C

Wait 30 seconds for graceful shutdown.

Result:
  âœ“ No more load being sent to ALB
  âœ“ Instances no longer under stress
  âœ“ CPU will drop to normal levels
  âœ“ RequestCount will drop to 0

================================================================================
STEP 2: COLLECT FINAL CLOUDWATCH METRICS & SCREENSHOTS
================================================================================

Take these screenshots FOR YOUR LAB REPORT:

Screenshot Set 1: FINAL METRICS
Go to: CloudWatch > Dashboards > D7078E-Mini-Project-Dashboard

Capture:
  â–¡ Full dashboard showing final state
  â–¡ CPU Utilization (should be low, ~5%)
  â–¡ RequestCount (should be low or 0)
  â–¡ HealthyHostCount (current state: 1, 2, or 3)
  
Save as: 01_final_metrics_dashboard.png

Screenshot Set 2: ASG ACTIVITY LOG
Go to: EC2 > Auto Scaling Groups > D7078E-MINI-PROJECT-GROUP35-ASG
Click: Activity tab

Capture:
  â–¡ All scaling events (launches, terminations)
  â–¡ Timestamps of each event
  â–¡ Status of each action
  
Save as: 02_asg_activity_log.png

Screenshot Set 3: EC2 INSTANCES CURRENT STATE
Go to: EC2 > Instances
Filter: Show instances from your ASG

Capture:
  â–¡ Current instances running (1, 2, or 3)
  â–¡ Instance IDs
  â–¡ Instance states (Running, Terminated, Terminating)
  â–¡ Launch times
  â–¡ Public IPs
  
Save as: 03_ec2_instances_final.png

Screenshot Set 4: CLOUDWATCH ALARMS STATE
Go to: CloudWatch > Alarms > All Alarms

Capture:
  â–¡ cpu-high-alarm-80percent (current state)
  â–¡ cpu-low-alarm-30percent (current state)
  â–¡ Alarm history showing triggers
  
Save as: 04_cloudwatch_alarms_final.png

Screenshot Set 5: TARGET GROUP HEALTH
Go to: EC2 > Target Groups > D7078E-MINI-PROJECT-GROUP35-TG
Click: Targets tab

Capture:
  â–¡ All instances in target group
  â–¡ Health status (Healthy, Unhealthy, Draining)
  â–¡ Last health check status
  
Save as: 05_target_group_health.png

Screenshot Set 6: FULL TIMELINE VIEW (Optional but recommended)
Go to: CloudWatch > Dashboards
Create custom time range showing entire load test

Capture:
  â–¡ Complete timeline from start to finish
  â–¡ All phases visible (Phase 1, 2, 3)
  â–¡ Scaling events visible in graph
  
Save as: 06_full_timeline_view.png

================================================================================
STEP 3: DELETE AUTO SCALING GROUP (INSTANCES WILL TERMINATE)
================================================================================

CAUTION: This will terminate all running instances!
But make sure you've taken screenshots first!

Using AWS Console:

1. Go to: EC2 > Auto Scaling Groups

2. Select: D7078E-MINI-PROJECT-GROUP35-ASG

3. Click: Delete Auto Scaling group

4. Confirmation dialog appears:
   - Review selected ASG name
   - Check "Yes, terminate instances when deleting"
   - Click "Delete"

5. Wait for deletion to complete (1-2 minutes)

Expected result:
  â”œâ”€ ASG deleted
  â”œâ”€ All instances receive termination signal
  â”œâ”€ Instances transition to "Shutting down"
  â”œâ”€ Instances transition to "Terminated"
  â”œâ”€ HealthyHostCount in CloudWatch drops 3 â†’ 2 â†’ 1 â†’ 0
  â””â”€ No running instances remain

Verify:
  â”œâ”€ EC2 > Auto Scaling Groups: ASG should be gone
  â”œâ”€ EC2 > Instances: All instances should be "Terminated"
  â””â”€ CloudWatch: HealthyHostCount should be 0

Take screenshot: 07_asg_deleted_instances_terminated.png

================================================================================
STEP 4: DELETE APPLICATION LOAD BALANCER
================================================================================

Using AWS Console:

1. Go to: EC2 > Load Balancers

2. Select: D7078E-MINI-PROJECT-GROUP35-LB

3. Click: Actions > Delete load balancer

4. Confirmation dialog:
   - Verify load balancer name
   - Click "Yes, delete"

5. Wait for deletion (1-2 minutes)

Expected result:
  â”œâ”€ ALB deleted
  â”œâ”€ DNS name no longer resolves
  â””â”€ No load balancing occurring

Verify:
  â”œâ”€ EC2 > Load Balancers: ALB should be gone
  â””â”€ curl to ALB DNS: Should fail (connection refused)

Take screenshot: 08_alb_deleted.png

================================================================================
STEP 5: DELETE TARGET GROUP
================================================================================

Using AWS Console:

1. Go to: EC2 > Target Groups

2. Select: D7078E-MINI-PROJECT-GROUP35-TG

3. Click: Actions > Delete

4. Confirmation:
   - Verify target group name
   - Click "Yes, delete"

5. Wait for deletion (should be instant)

Expected result:
  â”œâ”€ Target Group deleted
  â”œâ”€ No targets registered
  â””â”€ No health checks occurring

Verify:
  â””â”€ EC2 > Target Groups: TG should be gone

Take screenshot: 09_target_group_deleted.png

================================================================================
STEP 6: DELETE LAUNCH TEMPLATE
================================================================================

Using AWS Console:

1. Go to: EC2 > Launch Templates

2. Search for: D7078E (your launch template)

3. Select it

4. Click: Delete

5. Confirmation:
   - Verify template name
   - Click "Delete"

6. Wait for deletion (instant)

Expected result:
  â””â”€ Launch Template deleted

Verify:
  â””â”€ EC2 > Launch Templates: Should not see your template

Take screenshot: 10_launch_template_deleted.png

================================================================================
STEP 7: (OPTIONAL) DELETE SECURITY GROUPS
================================================================================

If you created security groups just for this lab, you can delete them:

Using AWS Console:

1. Go to: EC2 > Security Groups

2. Search for: "web-app" or your lab prefix

3. Select security groups (don't delete default SG)

4. Click: Delete security group

5. Confirm deletion

WARNING:
  â”œâ”€ Don't delete "default" security group (AWS prevents this)
  â”œâ”€ Only delete ones you specifically created
  â””â”€ If in doubt, leave them (won't cost anything)

This step is optional.

================================================================================
STEP 8: (OPTIONAL) DEREGISTER AMI
================================================================================

If you want to free up storage space:

Using AWS Console:

1. Go to: EC2 > AMIs

2. Search for: "web-app-ami-d7078e" (your AMI)

3. Right-click > Deregister

4. Confirmation:
   - Verify AMI name and ID
   - Click "Deregister"

5. Wait for deregistration

Alternatively, keep the AMI if you want to reuse it later!

This step is optional.

================================================================================
STEP 9: VERIFY ALL RESOURCES DELETED
================================================================================

Check that everything is cleaned up:

â˜ EC2 > Auto Scaling Groups
   â””â”€ Your ASG should NOT appear

â˜ EC2 > Load Balancers
   â””â”€ Your ALB should NOT appear

â˜ EC2 > Target Groups
   â””â”€ Your TG should NOT appear

â˜ EC2 > Launch Templates
   â””â”€ Your template should NOT appear

â˜ EC2 > Instances
   â””â”€ Should show TERMINATED instances from your ASG
   â””â”€ (These will disappear after a few hours)

â˜ CloudWatch > Dashboards
   â””â”€ Optional: Delete D7078E-Lab-Dashboard if you don't need it

Take screenshot: 11_all_resources_verified_deleted.png

Note down:
  - Deletion start time: _________
  - Deletion complete time: _________
  - Total resources deleted: ___ items

================================================================================
STEP 10: COLLECT CLOUDTRAIL LOGS (Optional but recommended)
================================================================================

For audit trail and documentation:

Go to: CloudTrail > Event history

Filter by:
  â”œâ”€ User or role: Your AWS username
  â”œâ”€ Resource type: Auto Scaling, Elastic Load Balancing, EC2
  â”œâ”€ Event name: Contains "Create", "Delete", "Scale"

Download as JSON:

  1. Select desired events
  2. Click "Download events as JSON"
  3. Save file: cloudtrail_events.json

This provides:
  âœ“ Complete audit trail
  âœ“ Exact timestamps
  âœ“ Who did what
  âœ“ Which resources were affected
  âœ“ Perfect for lab report!

================================================================================
STEP 11: CHECK AWS COSTS (OPTIONAL)
================================================================================

Verify your costs are as expected:

Go to: AWS Billing > Cost Explorer

View:
  â”œâ”€ EC2 charges (should have ended when ASG deleted)
  â”œâ”€ ALB charges (should have ended when ALB deleted)
  â”œâ”€ Data transfer (usually minimal)
  â””â”€ Total lab cost

Expected costs:
  â”œâ”€ 30-minute lab with 3 instances + ALB: $0.30 - $2.00
  â”œâ”€ 1-hour lab: $0.60 - $4.00
  â”œâ”€ Full day lab: $10 - $20

If costs are higher than expected:
  â”œâ”€ Check if resources still running (they shouldn't be!)
  â”œâ”€ Check for extra resources (unused ALBs, unused instances)
  â”œâ”€ Note: Charges may take 24 hours to appear on billing

Document: Actual costs incurred: $______

================================================================================
STEP 12: COMPILE ALL EVIDENCE FOR LAB REPORT
================================================================================

Organize screenshots in a folder:

D7078E-Lab-Report-Evidence/
â”œâ”€â”€ 01_final_metrics_dashboard.png
â”œâ”€â”€ 02_asg_activity_log.png
â”œâ”€â”€ 03_ec2_instances_final.png
â”œâ”€â”€ 04_cloudwatch_alarms_final.png
â”œâ”€â”€ 05_target_group_health.png
â”œâ”€â”€ 06_full_timeline_view.png
â”œâ”€â”€ 07_asg_deleted_instances_terminated.png
â”œâ”€â”€ 08_alb_deleted.png
â”œâ”€â”€ 09_target_group_deleted.png
â”œâ”€â”€ 10_launch_template_deleted.png
â”œâ”€â”€ 11_all_resources_verified_deleted.png
â”œâ”€â”€ cloudtrail_events.json (optional)
â””â”€â”€ README.txt (summary of all events)

Plus any screenshots from Tasks 1-5:
â”œâ”€â”€ Task_1_Screenshots/
â”‚   â”œâ”€â”€ instance_running.png
â”‚   â”œâ”€â”€ web_app_responding.png
â”‚   â””â”€â”€ ami_created.png
â”œâ”€â”€ Task_2_Screenshots/
â”‚   â”œâ”€â”€ launch_template.png
â”‚   â”œâ”€â”€ alb_active.png
â”‚   â”œâ”€â”€ target_group_healthy.png
â”‚   â””â”€â”€ asg_instance_running.png
â”œâ”€â”€ Task_3_Screenshots/
â”‚   â”œâ”€â”€ scaling_policies_created.png
â”‚   â””â”€â”€ alarms_configured.png
â”œâ”€â”€ Task_4_Screenshots/
â”‚   â”œâ”€â”€ phase_1_low_load.png
â”‚   â”œâ”€â”€ phase_2_medium_load.png
â”‚   â”œâ”€â”€ phase_3_high_load.png
â”‚   â”œâ”€â”€ scaling_1_to_2.png
â”‚   â”œâ”€â”€ scaling_2_to_3.png
â”‚   â””â”€â”€ all_3_instances_healthy.png
â””â”€â”€ Task_5_Screenshots/ (if completed)
    â”œâ”€â”€ failure_detection.png
    â”œâ”€â”€ instance_replacement.png
    â””â”€â”€ full_recovery.png

================================================================================
STEP 13: CREATE FINAL LAB REPORT
================================================================================

Write a comprehensive lab report document (PDF or Word):

REPORT OUTLINE:

1. TITLE PAGE
   â”œâ”€ Title: D7078E Cloud Security Mini Project
   â”œâ”€ Name: _______________
   â”œâ”€ Date: _______________
   â”œâ”€ Student ID: _______________
   â””â”€ Institution: _______________

2. EXECUTIVE SUMMARY (1 page)
   â”œâ”€ What was tested
   â”œâ”€ Key findings
   â”œâ”€ Objectives achieved
   â””â”€ Overall success/lessons

3. OBJECTIVES (1 page)
   â”œâ”€ Task 1: âœ“ Prepare web app AMI
   â”œâ”€ Task 2: âœ“ Create ALB, TG, ASG, Launch Template
   â”œâ”€ Task 3: âœ“ Configure CloudWatch alarms & scaling
   â”œâ”€ Task 4: âœ“ Run load generators and observe scaling
   â”œâ”€ Task 5: âœ“ Simulate failure and observe recovery (if done)
   â””â”€ Task 6: âœ“ Cleanup and document

4. ARCHITECTURE DIAGRAM (1 page)
   â”œâ”€ Show: Load generators â†’ ALB â†’ ASG â†’ 3 Instances
   â”œâ”€ Show: CloudWatch monitoring
   â””â”€ Show: Scaling policies and alarms

5. METHODOLOGY (2-3 pages)
   â”œâ”€ Tools used (AWS, Python, CloudWatch, etc.)
   â”œâ”€ Infrastructure setup
   â”œâ”€ Load generation approach
   â”œâ”€ Monitoring strategy
   â””â”€ Failure simulation method

6. RESULTS (5-10 pages with screenshots)
   
   Task 1 Results:
   â”œâ”€ Screenshot: Instance running
   â”œâ”€ Screenshot: Web app responding to endpoints
   â”œâ”€ Screenshot: /burn endpoint CPU spike
   â””â”€ Findings: AMI successfully created
   
   Task 2 Results:
   â”œâ”€ Screenshot: Launch Template
   â”œâ”€ Screenshot: ALB active
   â”œâ”€ Screenshot: Target Group healthy
   â”œâ”€ Screenshot: ASG with 1 instance
   â””â”€ Findings: Infrastructure operational
   
   Task 3 Results:
   â”œâ”€ Screenshot: Scaling policies
   â”œâ”€ Screenshot: CloudWatch alarms configured
   â””â”€ Findings: Scaling automation ready
   
   Task 4 Results (DETAILED):
   â”œâ”€ Screenshot: Phase 1 metrics (low load)
   â”œâ”€ Screenshot: Phase 2 metrics (medium load)
   â”œâ”€ Screenshot: Phase 3 metrics (high load, scaling triggered)
   â”œâ”€ Screenshot: 1st instance launch (1 â†’ 2)
   â”œâ”€ Screenshot: 2nd instance launch (2 â†’ 3)
   â”œâ”€ Screenshot: All 3 instances healthy
   â”œâ”€ Timeline: Exact timestamps of scaling events
   â”œâ”€ Metrics: Peak CPU, peak RPS, etc.
   â””â”€ Findings: Auto-scaling works perfectly!
   
   Task 5 Results (If completed):
   â”œâ”€ Screenshot: Before failure (3 healthy)
   â”œâ”€ Screenshot: During failure (health check failing)
   â”œâ”€ Screenshot: Replacement launching
   â”œâ”€ Screenshot: After recovery (3 healthy again)
   â”œâ”€ Timeline: Failure â†’ Detection â†’ Replacement â†’ Recovery
   â”œâ”€ Duration: Time to recover ___ minutes
   â””â”€ Findings: Automatic failover successful!
   
   Task 6 Results:
   â”œâ”€ Screenshots: Resource cleanup
   â””â”€ Verification: All resources deleted

7. ANALYSIS & OBSERVATIONS (3-5 pages)
   
   Auto-Scaling Performance:
   â”œâ”€ Time from alarm trigger to scaling action: ___ seconds
   â”œâ”€ Time for new instance to become healthy: ___ minutes
   â”œâ”€ Peak CPU percentage: ____%
   â”œâ”€ Peak request rate: ___ RPS
   â”œâ”€ Total requests served: ___,___
   â””â”€ Success rate: ___%
   
   Failure & Recovery (if Task 5 done):
   â”œâ”€ Failure detection time: ___ seconds
   â”œâ”€ Replacement launch time: ___ seconds
   â”œâ”€ Total recovery time: ___ minutes
   â”œâ”€ System availability during failure: __%
   â”œâ”€ Zero manual intervention: âœ“ YES
   â””â”€ Automatic failover: âœ“ SUCCESSFUL
   
   Cost Analysis:
   â”œâ”€ Estimated lab cost: $_____
   â”œâ”€ Cost breakdown by service
   â””â”€ Cost optimization recommendations
   
   Infrastructure Performance:
   â”œâ”€ Average latency: ___ ms
   â”œâ”€ P95 latency: ___ ms
   â”œâ”€ Error rate: ____%
   â”œâ”€ Throughput scalability: Linear (excellent)
   â””â”€ Load balancing: Even distribution across instances

8. LESSONS LEARNED (2-3 pages)
   
   What Worked Well:
   â”œâ”€ Auto-scaling triggered at correct threshold
   â”œâ”€ New instances launched promptly
   â”œâ”€ Health checks detected failures quickly
   â”œâ”€ ALB distributed load evenly
   â”œâ”€ System remained available during scaling
   â””â”€ Automatic failover was seamless
   
   Challenges & Observations:
   â”œâ”€ Scale-in takes longer than scale-out (this is intentional)
   â”œâ”€ Load ramping strategy important
   â”œâ”€ Monitoring critical for debugging
   â””â”€ Instance boot time affects scaling latency
   
   Production Implications:
   â”œâ”€ Architecture is suitable for production
   â”œâ”€ SLA achievable: 99.0%+ availability
   â”œâ”€ Can handle 5-10x current load with more scaling
   â”œâ”€ Cost scales linearly with capacity
   â””â”€ Multi-AZ deployment improves resilience further
   
   Recommendations:
   â”œâ”€ Implement instance warm-up pooling (pre-booted instances)
   â”œâ”€ Use larger instance types for faster response
   â”œâ”€ Add CloudFront CDN for static content
   â”œâ”€ Implement session persistence for stateful apps
   â”œâ”€ Add data layer replication
   â”œâ”€ Implement rate limiting
   â”œâ”€ Add DDoS protection (AWS Shield/WAF)
   â””â”€ Continuous deployment of new instances

9. CONCLUSION (1 page)
   â”œâ”€ All objectives achieved
   â”œâ”€ System demonstrates high availability
   â”œâ”€ Auto-scaling works as designed
   â”œâ”€ Suitable for production workloads
   â””â”€ Lab successfully demonstrates cloud architecture principles

10. APPENDIX (5+ pages)
    â”œâ”€ Full screenshots (organized by task)
    â”œâ”€ CloudTrail logs (sample events)
    â”œâ”€ Configuration details (exact settings used)
    â”œâ”€ Commands executed (for reproduction)
    â”œâ”€ Performance metrics (detailed graphs)
    â”œâ”€ Cost breakdown
    â””â”€ References and links

REPORT LENGTH: 20-30 pages (including screenshots)

================================================================================
STEP 14: FINAL CHECKLIST - TASK 6 COMPLETE
================================================================================

Before submitting, verify:

â–¡ All load generators stopped
â–¡ All AWS resources deleted (ASG, ALB, TG, Launch Template)
â–¡ All instances terminated
â–¡ No resources still running (check EC2, ALB, ASG consoles)
â–¡ CloudTrail logs collected
â–¡ All screenshots organized in folder
â–¡ Lab report written (20-30 pages)
â–¡ All evidence included in appendix
â–¡ Timeline documented with exact timestamps
â–¡ Metrics calculated and analyzed
â–¡ Lessons learned section completed
â–¡ References and sources cited
â–¡ Report spell-checked and formatted
â–¡ PDF generated and verified readable

================================================================================
STEP 15: SUBMIT YOUR LAB
================================================================================

Deliverables to submit:

1. Lab Report (PDF)
   â””â”€ File: D7078E-Lab-Report-YOURNAME.pdf
   â””â”€ Size: 20-30 pages
   â””â”€ Format: Professional

2. Evidence Folder
   â””â”€ Folder: D7078E-Lab-Evidence/
   â””â”€ Contains: 15+ screenshots
   â””â”€ Contains: CloudTrail logs
   â””â”€ Contains: Configuration files
   â””â”€ Contains: Timeline document

3. Code & Scripts (Optional)
   â””â”€ agent.py (load generator)
   â””â”€ docker-compose.yml
   â””â”€ Dockerfile
   â””â”€ run_high_load.ps1
   â””â”€ run_max_load.ps1

4. Checklist
   â””â”€ Verification that all tasks completed

Submit via:
â”œâ”€ Canvas (if instructor specified)
â”œâ”€ Email to instructor
â””â”€ USB drive (if offline submission)

================================================================================
TASK 6 COMPLETE - LAB FINISHED! âœ…
================================================================================

Congratulations on completing the D7078E Cloud Security Mini Project!

You have successfully:

âœ“ Created web server infrastructure on AWS
âœ“ Configured auto-scaling based on demand
âœ“ Demonstrated horizontal scaling (1 â†’ 2 â†’ 3 instances)
âœ“ Set up CloudWatch monitoring and alarms
âœ“ Ran load tests and observed system behavior
âœ“ Simulated failure and observed automatic recovery (if Task 5 done)
âœ“ Documented all findings in comprehensive report
âœ“ Cleaned up all resources to save costs

SKILLS DEMONSTRATED:
âœ“ Cloud Infrastructure Design
âœ“ AWS EC2, ALB, ASG, CloudWatch
âœ“ Infrastructure as Code
âœ“ Load Testing & Performance Analysis
âœ“ Monitoring & Alerting
âœ“ High Availability Architecture
âœ“ Failure Recovery & Resilience
âœ“ Cost Management
âœ“ Technical Documentation

This lab demonstrates professional cloud engineering practices!

You've earned: â­â­â­â­â­ (5 stars!)

Good luck with your submission! ğŸš€

================================================================================
